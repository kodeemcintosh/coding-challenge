{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState } from 'react'; // import fetch from 'isomorphic-unfetch';\n\nimport { Header } from '@components/header';\nimport { Footer } from '@components/footer';\nimport { TicketItem } from '@components/ticket-item';\n\nconst IndexPage = ({\n  reports\n}) => {\n  var _tickets$active;\n\n  const {\n    0: tickets,\n    1: setTickets\n  } = useState(reports);\n\n  const handleUpdateTicket = async (id, state) => {\n    const response = await fetch('http://0.0.0.0:3000/api/reports/' + id, {\n      method: 'PUT',\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Content-Type\": \"text/plain\"\n      },\n      body: JSON.stringify({\n        payload: {\n          ticketState: state\n        }\n      })\n    });\n    setTickets(response);\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: \"grid mx-20\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"bg-white rounded-lg shadow-sm hover:shadow-lg duration-500 px-2 sm:px-6 md:px-2 py-4 my-6\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"grid grid-cols\",\n          children: tickets === null || tickets === void 0 ? void 0 : (_tickets$active = tickets.active) === null || _tickets$active === void 0 ? void 0 : _tickets$active.map(({\n            id,\n            type,\n            status,\n            message\n          }) => {\n            return /*#__PURE__*/_jsx(TicketItem, {\n              id: id,\n              type: type,\n              status: status,\n              message: message,\n              resolve: () => handleUpdateTicket(id, 'RESOLVED'),\n              block: () => handleUpdateTicket(id, 'BLOCKED')\n            }, `ticket-${id})`);\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n};\n\nexport async function getServerSideProps() {\n  const data = await fetch('http://0.0.0.0:3000/api/reports', {\n    method: 'GET'\n  });\n  const {\n    reports\n  } = await data.json();\n  return {\n    props: {\n      reports\n    }\n  };\n}\nexport default IndexPage;","map":null,"metadata":{},"sourceType":"module"}