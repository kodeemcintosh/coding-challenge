{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport fetch from 'isomorphic-unfetch';\nimport { Header } from '@components/header';\nimport { Footer } from '@components/footer';\nimport { TicketItem } from '@components/ticket-item';\nimport { useRouter } from 'next/router';\nexport async function getServerSideProps() {\n  const data = await fetch('http://localhost:3000/api/reports');\n  const {\n    reports\n  } = await data.json();\n  return {\n    props: {\n      reports\n    }\n  };\n}\n\nconst IndexPage = ({\n  reports\n}) => {\n  const router = useRouter();\n\n  const handleUpdateTicket = async (id, state) => {\n    const response = await fetch(`http://localhost:3000/api/reports/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origins': '*'\n      },\n      body: JSON.stringify({\n        ticketState: state\n      })\n    });\n    const res = await response.json();\n    if (response.status < 300) refreshReports();\n    console.log('RES: ', res);\n  }; // TODO: refactor into a more elegant solution for refreshing reports data\n\n\n  const refreshReports = () => router.replace(router.asPath);\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: \"flex mx-20 justify-center\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"bg-white rounded-lg shadow-sm hover:shadow-lg duration-500 px-2 sm:px-6 md:px-2 py-4 my-6 w-4/5\",\n        children: reports === null || reports === void 0 ? void 0 : reports.map(({\n          id,\n          type,\n          status,\n          message\n        }) => {\n          return /*#__PURE__*/_jsx(TicketItem, {\n            id: id,\n            type: type,\n            status: status,\n            message: message,\n            updateTicket: handleUpdateTicket\n          }, `ticket-${id})`);\n        })\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n};\n\nexport default IndexPage;","map":null,"metadata":{},"sourceType":"module"}